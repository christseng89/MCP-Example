# CASE STUDY 4 - Custom Drone Order Handling

## 主流程

1. **客户询价**
   - Customer sends initial inquiry via homepage form

2. **可行性检查**
   - Employee checks feasibility
   - 如果不可行：
     - 员工发送合作伙伴公司信息给潜在客户
     - 在 CRM 记录被跳过的订单
     - 流程结束
   - 如果可行 → 进入下一步

3. **检查零件可用性**
   - 员工检查所有零件是否可用
   - 然后发送报价（价格 + 交付日期）给客户

4. **客户回应**
   - 如果客户下单 → 流程继续
   - 如果客户拒绝 → 流程结束
   - 如果 7 天无回应 → 订单取消，CRM 更新

5. **零件订购**
   - 可用零件 → 从仓库订购
   - 缺少零件 → 从供应商订购

6. **启动子流程：Assembly**
   - 当零件准备好，进入装配子流程
   - 装配完成后 → 成品无人机发给客户，流程结束

---

## 子流程：Assembly (装配)

1. **准备阶段（并行进行）**
   - Preparing frame
   - Preparing motors and propellers
   - Preparing electronic components

2. **装配基础部件**
   - 所有准备任务完成后，员工组装基本部件

3. **检查是否有附加组件**
   - 如果订单包含选配项：
     - 添加 GPS
     - 添加 Camera
   - 如果没有 → 跳过

4. **配置组件**
   - 员工配置组件

5. **测试无人机**
   - 如果测试通过 → 无人机就绪，子流程结束
   - 如果测试失败 → 返回 **配置组件**，重新测试

---

✅ 这样整理后你可以直接用它去画 BPMN：

*主流程有 **可行性判断、客户响应分支、定时取消**
*子流程 Assembly 有 **并行任务、条件网关、循环（测试失败回到配置）**
